echo "ğŸš€ Running pre-push validations..."
echo ""

# 1. Lint
echo "ğŸ” Step 1/4: Running ESLint..."
yarn lint
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Lint failed!"
  echo "Please fix the linting issues before pushing."
  exit 1
fi
echo "âœ… Lint completed!"
echo ""

# 2. TypeScript
echo "ğŸ” Step 2/4: Running TypeScript type-check..."
yarn typecheck
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ TypeScript type-check failed!"
  echo "Please fix the type errors before pushing."
  exit 1
fi
echo "âœ… TypeScript type-check passed!"
echo ""

# 3. Tests
echo "ğŸ§ª Step 3/4: Running tests..."
yarn test
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Tests failed!"
  echo "Please fix the failing tests before pushing."
  exit 1
fi
echo "âœ… All tests passed!"
echo ""

# 4. Build
echo "ğŸ—ï¸  Step 4/4: Building..."
yarn build
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Build failed!"
  echo "Please fix the build errors before pushing."
  exit 1
fi
echo "âœ… Build passed!"
echo ""
echo "âœ… All validations passed! Proceeding with push."
exit 0
